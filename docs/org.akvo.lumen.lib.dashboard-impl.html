<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>org.akvo.lumen.lib.dashboard-impl documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Org.akvo.lumen</span> <span class="project-version">0.2-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 branch"><a href="dev.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>org</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>akvo</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lumen</span></div></div></li><li class="depth-4 branch"><a href="org.akvo.lumen.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>component</span></div></div></li><li class="depth-5 branch"><a href="org.akvo.lumen.component.http.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></a></li><li class="depth-5"><a href="org.akvo.lumen.component.tenant-manager.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tenant-manager</span></div></a></li><li class="depth-4 branch"><a href="org.akvo.lumen.config.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>endpoint</span></div></div></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.dashboard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dashboard</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.dataset.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dataset</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.files.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>files</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.flow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flow</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.job-execution.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>job-execution</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.library.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>library</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.public.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>public</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.root.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>root</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.share.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>share</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.endpoint.transformation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transformation</span></div></a></li><li class="depth-5"><a href="org.akvo.lumen.endpoint.visualisation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualisation</span></div></a></li><li class="depth-4"><a href="org.akvo.lumen.import.html"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>import</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.import.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.import.csv.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csv</span></div></a></li><li class="depth-5"><a href="org.akvo.lumen.import.flow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flow</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>lib</span></div></div></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.dashboard.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dashboard</span></div></a></li><li class="depth-5 branch current"><a href="org.akvo.lumen.lib.dashboard-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dashboard-impl</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.dataset.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dataset</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.dataset-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dataset-impl</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.flow.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flow</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.flow-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flow-impl</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.job-execution.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>job-execution</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.job-execution-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>job-execution-impl</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.public.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>public</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.public-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>public-impl</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.share.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>share</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.share-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>share-impl</span></div></a></li><li class="depth-5 branch"><a href="org.akvo.lumen.lib.visualisation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualisation</span></div></a></li><li class="depth-5"><a href="org.akvo.lumen.lib.visualisation-impl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>visualisation-impl</span></div></a></li><li class="depth-4 branch"><a href="org.akvo.lumen.main.html"><div class="inner"><span class="tree" style="top: -455px;"><span class="top" style="height: 464px;"></span><span class="bottom"></span></span><span>main</span></div></a></li><li class="depth-4 branch"><a href="org.akvo.lumen.migrate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>migrate</span></div></a></li><li class="depth-4"><a href="org.akvo.lumen.transformation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transformation</span></div></a></li><li class="depth-5"><a href="org.akvo.lumen.transformation.engine.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>engine</span></div></a></li><li class="depth-4"><a href="org.akvo.lumen.util.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-1"><a href="user.html"><div class="inner"><span class="tree" style="top: -1354px;"><span class="top" style="height: 1363px;"></span><span class="bottom"></span></span><span>user</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-all"><div class="inner"><span>all</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-all-dashboards"><div class="inner"><span>all-dashboards</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-all-entities"><div class="inner"><span>all-entities</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-all-layouts"><div class="inner"><span>all-layouts</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-build-dashboard-by-id"><div class="inner"><span>build-dashboard-by-id</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-create"><div class="inner"><span>create</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-dashboard-by-id"><div class="inner"><span>dashboard-by-id</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-dashboard-keys-match.3F"><div class="inner"><span>dashboard-keys-match?</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-dashboard_visualisation-by-dashboard-id"><div class="inner"><span>dashboard_visualisation-by-dashboard-id</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-delete"><div class="inner"><span>delete</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-delete-dashboard-by-id"><div class="inner"><span>delete-dashboard-by-id</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-delete-dashboard_visualisation"><div class="inner"><span>delete-dashboard_visualisation</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-fetch"><div class="inner"><span>fetch</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-filter-type"><div class="inner"><span>filter-type</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-handle-dashboard-by-id"><div class="inner"><span>handle-dashboard-by-id</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-insert-dashboard"><div class="inner"><span>insert-dashboard</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-insert-dashboard_visualisation"><div class="inner"><span>insert-dashboard_visualisation</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-part-by-entity-type"><div class="inner"><span>part-by-entity-type</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-update-dashboard"><div class="inner"><span>update-dashboard</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-upsert"><div class="inner"><span>upsert</span></div></a></li><li class="depth-1"><a href="org.akvo.lumen.lib.dashboard-impl.html#var-upsert-dashboard"><div class="inner"><span>upsert-dashboard</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">org.akvo.lumen.lib.dashboard-impl</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-all"><h3>all</h3><div class="usage"><code>(all tenant-conn)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-all-dashboards"><h3>all-dashboards</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Return all dashboards
</pre></div></div><div class="public anchor" id="var-all-entities"><h3>all-entities</h3><div class="usage"><code>(all-entities text-entities dvs)</code></div><div class="doc"><pre class="plaintext">Merge text &amp; dashboard_visualisations (dvs) entries, return an id keyed map
</pre></div></div><div class="public anchor" id="var-all-layouts"><h3>all-layouts</h3><div class="usage"><code>(all-layouts text-layout dvs)</code></div><div class="doc"><pre class="plaintext">Merge text &amp; dashboard_visualisations (dvs) layouts, return an id keyed map.
</pre></div></div><div class="public anchor" id="var-build-dashboard-by-id"><h3>build-dashboard-by-id</h3><div class="usage"><code>(build-dashboard-by-id dashboard dvs)</code></div><div class="doc"><pre class="plaintext">
</pre></div></div><div class="public anchor" id="var-create"><h3>create</h3><div class="usage"><code>(create tenant-conn spec)</code></div><div class="doc"><pre class="plaintext">With a dashboard spec, first split into visualisation and text entities.
Insert new dashboard and pass all text entites into the dashboard.spec. Then
for each visualiation included in the dashboard insert an entry into
dashboard_visualisation with it's layout data.</pre></div></div><div class="public anchor" id="var-dashboard-by-id"><h3>dashboard-by-id</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Return dashboard by id.
</pre></div></div><div class="public anchor" id="var-dashboard-keys-match.3F"><h3>dashboard-keys-match?</h3><div class="usage"><code>(dashboard-keys-match? dashboard)</code></div><div class="doc"><pre class="plaintext">Make sure each key in entity have a matching key in layout.
</pre></div></div><div class="public anchor" id="var-dashboard_visualisation-by-dashboard-id"><h3>dashboard_visualisation-by-dashboard-id</h3><div class="usage"></div><div class="doc"><pre class="plaintext">
</pre></div></div><div class="public anchor" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete tenant-conn id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-delete-dashboard-by-id"><h3>delete-dashboard-by-id</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Delete dashboard
</pre></div></div><div class="public anchor" id="var-delete-dashboard_visualisation"><h3>delete-dashboard_visualisation</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Remove all visualisations from dashboard
</pre></div></div><div class="public anchor" id="var-fetch"><h3>fetch</h3><div class="usage"><code>(fetch tenant-conn id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-filter-type"><h3>filter-type</h3><div class="usage"><code>(filter-type dashboard-data kind)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-handle-dashboard-by-id"><h3>handle-dashboard-by-id</h3><div class="usage"><code>(handle-dashboard-by-id tenant-conn id)</code></div><div class="doc"><pre class="plaintext">Hand of packing to pure build-dashboard-by-id
</pre></div></div><div class="public anchor" id="var-insert-dashboard"><h3>insert-dashboard</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Insert dashboard.
</pre></div></div><div class="public anchor" id="var-insert-dashboard_visualisation"><h3>insert-dashboard_visualisation</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Add an visualisation to a dashboard
</pre></div></div><div class="public anchor" id="var-part-by-entity-type"><h3>part-by-entity-type</h3><div class="usage"><code>(part-by-entity-type entities)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-update-dashboard"><h3>update-dashboard</h3><div class="usage"></div><div class="doc"><pre class="plaintext">
</pre></div></div><div class="public anchor" id="var-upsert"><h3>upsert</h3><div class="usage"><code>(upsert tenant-conn id spec)</code></div><div class="doc"><pre class="plaintext">We update a dashboard via upsert of dashboard and clean - insert of
dashboard_visualisations.
1. Unpack text &amp; visualisation entities
2. Update dashboard tablefq
3. Remove old dashboard_visualisations
4. Add new dashboard_visualisations
</pre></div></div><div class="public anchor" id="var-upsert-dashboard"><h3>upsert-dashboard</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Insert or update dashboard.
</pre></div></div></div></body></html>